<div class="container-fluid">
    <div class="d-flex align-items-center justify-content-between my-4 dis-bg ">
        <div class="ps-2">
            <h2>Fill the <span>Recipes !</span></h2>
            <p class="w-75">you can now fill the meals easily using the table and form , click here and sill it with the
                table !</p>

        </div>
        <div>
            <button routerLink="/dashboard/admin/recipes" class="btn-main px-5 rounded-2">All Recipes <i
                    class="fa-solid fa-arrow-right"></i></button>
        </div>
    </div>
    <p class="lead h1">{{recipesId?'Edit Recipes':'Add New Recipes'}} </p>
    <form class="example-form m-5 shadow-lg  p-5 text-center w-75 m-auto mb-4" [formGroup]="recipesForm"
        (ngSubmit)="addRecipes(recipesForm)">
        <mat-form-field class="example-full-width w-100">
            <mat-label>Recipe Name</mat-label>
            <input type="text" matInput placeholder="Ex. Pizza" formControlName="name">
        </mat-form-field>
        <div class="text-start">
            <p *ngIf=" recipesForm.get('name')?.errors?.['required'] && recipesForm.get('name')?.touched"
                class="alert alert-danger p-2 rounded-3">
                name is required
            </p>

            <p *ngIf="recipesForm.get('name')?.errors?.['minlength'] && recipesForm.get('name')?.touched"
                class="alert alert-danger p-2 rounded-3">
                name must be at least 3 characters
            </p>

            <p *ngIf="recipesForm.get('name')?.errors?.['maxlength'] && recipesForm.get('name')?.touched"
                class="alert alert-danger p-2 rounded-3">
                name must be no more than 20 characters
            </p>
        </div>

        <mat-form-field class="example-full-width w-100">
            <mat-label>Tag</mat-label>
            <mat-select formControlName="tagId">
                <mat-option *ngFor="let tag of AllTags" [value]="tag.id">
                    {{tag.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <div class="text-start">
            <p *ngIf=" recipesForm.get('tagId')?.errors?.['required'] && recipesForm.get('tagId')?.touched"
                class="alert alert-danger p-2 rounded-3">
                tagId is required
            </p>
        </div>

        <mat-form-field class="example-full-width w-100">
            <mat-label>Price</mat-label>
            <input type="number" matInput placeholder="350.99" formControlName="price">
        </mat-form-field>
        <div class="text-start">
            <p *ngIf=" recipesForm.get('price')?.errors?.['required'] && recipesForm.get('price')?.touched"
                class="alert alert-danger p-2 rounded-3">
                price is required
            </p>
        </div>

        <mat-form-field class="example-full-width w-100">
            <mat-label>Category</mat-label>
            <mat-select multiple formControlName="categoriesIds">
                <mat-option *ngFor="let cat of listData" [value]="cat.id">
                    {{cat.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>
        <div class="text-start">
            <p *ngIf=" recipesForm.get('categoriesIds')?.errors?.['required'] && recipesForm.get('categoriesIds')?.touched"
                class="alert alert-danger p-2 rounded-3">
                categoriesIds is required
            </p>
        </div>

        <mat-form-field class="example-full-width w-100 ">
            <mat-label>Description <span class="text-danger">*</span></mat-label>
            <textarea matInput placeholder="Ex. It makes me feel..." formControlName="description"></textarea>
        </mat-form-field>


        <div>

            <ngx-dropzone class="h-25 drop d-flex align-items-center justify-content-center flex-column"
                (change)="onSelect($event)" [multiple]="false" accept="image/*">

                <ngx-dropzone-label><i class="fa-solid fa-arrow-up-from-bracket "></i></ngx-dropzone-label>

                <ngx-dropzone-label>Drag & Drop or <span class="drop-bg ">Choose a Item Image</span> to
                    Upload</ngx-dropzone-label>
                <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of files" [file]="f"
                    [removable]="true" (removed)="onRemove(f)">
                </ngx-dropzone-image-preview>
            </ngx-dropzone>
        </div>
        <div class="d-flex align-items-center justify-content-end gap-2 my-3">
            <button routerLink="/dashboard/admin/recipes" type="button"
                class="btn btn-outline-success rounded-1 py-2">Cancel</button>
            <button type="submit" class="btn-main rounded-1 py-2 px-4">{{recipesId?'Edit':'add'}}</button>
        </div>

    </form>
</div>